<!DOCTYPE html>
<html>
  <head>
    <h1>Super Yahoo pipes</h1>
    
    <style>
    #errors-block {
        color: red;
    }
    </style>

    <script type="text/javascript" src="jquery-1.4.4.js"></script>
    <script type="text/javascript" src="jquery.tmpl.js"></script> 
 
  </head>
<body>
  <div id="news">
  </div>
 
    <script type="text/javascript">
        // Create an array of books
//         var books = [
//             { title: "ASP.NET 4 Unleashed", price: 37.79, picture: "1.jpg" },
//             { title: "ASP.NET MVC Unleashed", price: 44.99, picture: "2.jpg" },
//             { title: "ASP.NET Kick Start", price: 4.00, picture: "3.jpg" },
//             { title: "ASP.NET MVC Unleashed iPhone", price: 44.99, picture: "4.jpg" },
//         ];
 
        // Render the books using the template
//         $("#bookTemplate").tmpl(books).appendTo("#news"); 
    </script> 

    <script id="bookTemplate" type="text/x-jQuery-tmpl">
        <div>
            <h2>${title}</h2>
        </div>
    </script>

    <script type="text/javascript">
    // -----------------------------------------------------------------------------------------
        // receive news from yahoo server
        // -----------------------------------------------------------------------------------------
        window.onload = function () {
            //Create a SCRIPT element.
            var script = document.createElement("script");
            //Set the Type.
            script.type = "text/javascript";
            //Set the source to the URL the JSON Service.
            script.src = "http://pipes.yahoo.com/pipes/pipe.run?_id=e9a2e77dffb3205d035c4e311d77bbe6&_render=json&_callback=DisplayNews";
           //Append the script element to the HEAD section.
            document.getElementsByTagName("head")[0].appendChild(script);
        };

        // -----------------------------------------------------------------------------------------
        // Display all received news on the page
        // -----------------------------------------------------------------------------------------
        function DisplayNews(response) {
            var i;
            ////
            console.log(response);
            console.log(response.value.items);
            // for(i = 0; i < response.count; i++) {
            //     CreateMainDivBlock(i);
            //     FillArticle(i, response);
            // }
            $("#bookTemplate").tmpl(response.value.items).appendTo("#news"); 
        }
    </script>
</body>
</html>